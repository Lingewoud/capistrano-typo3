language: php
sudo: true
php:
    - 7.0

services:
  - mysql

matrix:
  fast_finish: true

cache:
  - apt

addons:
  apt:
    packages:
      - nginx
      - realpath
        #      - apache2
        #      - libapache2-mod-fastcgi
        #      - php-memcached
        #      - php-memcache
        #      - php-apcu php7.0
        #      - php7.0-mcrypt
        #      - php7.0-mysql
        #      - php7.0-xml
        #      - php7.0-fpm
        #      - php7.0-xml
        #      - php7.0-soap
        #      - php7.0-zip
        #      - php7.0-mbstring
        #      - php7.0-gd
        #      - php7.0-opcache
        #      - graphicsmagick

install:
  - \curl -L https://get.rvm.io | bash -s stable
  - /bin/bash -l -c "rvm requirements"
  - /bin/bash -l -c "rvm install 2.0"
  - /bin/bash -l -c "gem install bundler --no-ri --no-rdoc"
  - travis/install-nginx.sh
  - mysql -e 'CREATE DATABASE IF NOT EXISTS test;'

script:
  - curl -vsf 'http://localhost:8080/hello.php' &> /dev/stdout
  - cat /tmp/error.log
  - mkdir typo3test
  - cd typo3test
  - git init
  - echo "vendor" >> .gitignore
  - curl -sSL https://raw.githubusercontent.com/Lingewoud/capistrano-typo3/master/install.sh | sh
  - git add .
  - git commit -m "install" -a
  - git status
  - ls
  - echo "jo"
